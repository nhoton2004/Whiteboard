{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\realtime-whiteboard\\\\Frontend\\\\src\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst generator = rough.generator();\nexport default function Canvas({\n  canvasRef,\n  ctx,\n  color,\n  size,\n  setElements,\n  elements,\n  tool\n}) {\n  _s();\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [cursor, setCursor] = useState({\n    x: 0,\n    y: 0,\n    visible: false\n  });\n\n  // khởi tạo canvas + DPR theo kích thước container\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const parent = canvas.parentElement;\n    const cssW = parent.clientWidth;\n    const cssH = parent.clientHeight;\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\n    canvas.width = Math.round(cssW * dpr);\n    canvas.height = Math.round(cssH * dpr);\n    canvas.style.width = cssW + \"px\";\n    canvas.style.height = cssH + \"px\";\n    const context = canvas.getContext(\"2d\");\n    context.setTransform(1, 0, 0, 1, 0, 0);\n    context.scale(dpr, dpr);\n    context.lineCap = \"round\";\n    context.strokeStyle = color;\n    context.lineWidth = size;\n    ctx.current = context;\n    const onResize = () => {\n      const cssW2 = parent.clientWidth;\n      const cssH2 = parent.clientHeight;\n      const dpr2 = Math.max(1, window.devicePixelRatio || 1);\n      canvas.width = Math.round(cssW2 * dpr2);\n      canvas.height = Math.round(cssH2 * dpr2);\n      canvas.style.width = cssW2 + \"px\";\n      canvas.style.height = cssH2 + \"px\";\n      context.setTransform(1, 0, 0, 1, 0, 0);\n      context.scale(dpr2, dpr2);\n      redraw();\n    };\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n    // eslint-disable-next-line\n  }, []);\n\n  // đổi màu khi đổi palette\n  useEffect(() => {\n    if (ctx.current) ctx.current.strokeStyle = color;\n  }, [color, ctx]);\n\n  /*** Input handlers ***/\n  const handleMouseDown = e => {\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    if (tool === \"pen\") {\n      setElements(prev => [...prev, {\n        element: \"pencil\",\n        offsetX,\n        offsetY,\n        path: [[offsetX, offsetY]],\n        stroke: color,\n        size\n      }]);\n    } else if (tool === \"eraser\") {\n      setElements(prev => [...prev, {\n        element: \"eraser\",\n        offsetX,\n        offsetY,\n        path: [[offsetX, offsetY]],\n        size: Math.max(8, size * 3) // tẩy to hơn nét\n      }]);\n    } else if (tool === \"rect\") {\n      setElements(prev => [...prev, {\n        element: \"rect\",\n        offsetX,\n        offsetY,\n        width: 0,\n        height: 0,\n        stroke: color,\n        size\n      }]);\n    } else if (tool === \"line\") {\n      setElements(prev => [...prev, {\n        element: \"line\",\n        offsetX,\n        offsetY,\n        width: offsetX,\n        height: offsetY,\n        stroke: color,\n        size\n      }]);\n    } else if (tool === \"circle\") {\n      setElements(prev => [...prev, {\n        element: \"circle\",\n        cx: offsetX,\n        cy: offsetY,\n        r: 0,\n        stroke: color,\n        size\n      }]);\n    }\n    setIsDrawing(true);\n    setCursor({\n      x: offsetX,\n      y: offsetY,\n      visible: true\n    });\n  };\n  const handleMouseMove = e => {\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    setCursor({\n      x: offsetX,\n      y: offsetY,\n      visible: true\n    });\n    if (!isDrawing) return;\n    if (tool === \"rect\") {\n      setElements(prev => prev.map((ele, i) => i === elements.length - 1 ? {\n        ...ele,\n        width: Math.abs(offsetX - ele.offsetX),\n        height: Math.abs(offsetY - ele.offsetY),\n        offsetX: offsetX < ele.offsetX ? offsetX : ele.offsetX,\n        offsetY: offsetY < ele.offsetY ? offsetY : ele.offsetY\n      } : ele));\n    } else if (tool === \"line\") {\n      setElements(prev => prev.map((ele, i) => i === elements.length - 1 ? {\n        ...ele,\n        width: offsetX,\n        height: offsetY\n      } : ele));\n    } else if (tool === \"pen\" || tool === \"eraser\") {\n      setElements(prev => prev.map((ele, i) => i === elements.length - 1 ? {\n        ...ele,\n        path: [...ele.path, [offsetX, offsetY]]\n      } : ele));\n    } else if (tool === \"circle\") {\n      setElements(prev => prev.map((ele, i) => i === elements.length - 1 ? {\n        ...ele,\n        r: Math.hypot(offsetX - ele.cx, offsetY - ele.cy)\n      } : ele));\n    }\n  };\n  const handleMouseUp = () => setIsDrawing(false);\n  const handleMouseLeave = () => setCursor(c => ({\n    ...c,\n    visible: false\n  }));\n\n  /*** Vẽ lại toàn bộ ***/\n  const drawEraserPath = (path, eraserSize) => {\n    const c = ctx.current;\n    c.save();\n    c.globalCompositeOperation = \"destination-out\";\n    c.lineCap = \"round\";\n    c.lineWidth = eraserSize;\n    c.beginPath();\n    c.moveTo(path[0][0], path[0][1]);\n    for (let i = 1; i < path.length; i++) c.lineTo(path[i][0], path[i][1]);\n    c.stroke();\n    c.restore();\n  };\n  const redraw = () => {\n    const canvas = canvasRef.current;\n    const roughCanvas = rough.canvas(canvas);\n    ctx.current.clearRect(0, 0, canvas.width, canvas.height);\n    elements.forEach(ele => {\n      if (ele.element === \"rect\") {\n        roughCanvas.draw(generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: ele.size || size\n        }));\n      } else if (ele.element === \"line\") {\n        roughCanvas.draw(generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: ele.size || size\n        }));\n      } else if (ele.element === \"pencil\") {\n        roughCanvas.linearPath(ele.path, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: ele.size || size\n        });\n      } else if (ele.element === \"eraser\") {\n        drawEraserPath(ele.path, ele.size || Math.max(8, size * 3));\n      } else if (ele.element === \"circle\") {\n        const d = (ele.r || 0) * 2;\n        roughCanvas.draw(generator.circle(ele.cx, ele.cy, d, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: ele.size || size\n        }));\n      }\n    });\n  };\n  useLayoutEffect(() => {\n    if (ctx.current) redraw();\n  }, [elements]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"calc(100vh - 64px)\",\n      position: \"relative\",\n      background: \"#fff\",\n      overflow: \"hidden\"\n    },\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    onMouseLeave: handleMouseLeave,\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), cursor.visible && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        left: cursor.x + 10,\n        top: cursor.y + 10,\n        pointerEvents: \"none\",\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: 6\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          width: 8,\n          height: 8,\n          borderRadius: \"50%\",\n          background: \"#0ea5e9\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          background: \"#111827\",\n          color: \"#e5e7eb\",\n          fontSize: 12,\n          padding: \"2px 6px\",\n          borderRadius: 6,\n          border: \"1px solid #334155\"\n        },\n        children: \"B\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n}\n_s(Canvas, \"k+cKmr9ZnaNw7xuCnDNgS56/qj8=\");\n_c = Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","rough","jsxDEV","_jsxDEV","generator","Canvas","canvasRef","ctx","color","size","setElements","elements","tool","_s","isDrawing","setIsDrawing","cursor","setCursor","x","y","visible","canvas","current","parent","parentElement","cssW","clientWidth","cssH","clientHeight","dpr","Math","max","window","devicePixelRatio","width","round","height","style","context","getContext","setTransform","scale","lineCap","strokeStyle","lineWidth","onResize","cssW2","cssH2","dpr2","redraw","addEventListener","removeEventListener","handleMouseDown","e","offsetX","offsetY","nativeEvent","prev","element","path","stroke","cx","cy","r","handleMouseMove","map","ele","i","length","abs","hypot","handleMouseUp","handleMouseLeave","c","drawEraserPath","eraserSize","save","globalCompositeOperation","beginPath","moveTo","lineTo","restore","roughCanvas","clearRect","forEach","draw","rectangle","roughness","strokeWidth","line","linearPath","d","circle","position","background","overflow","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","left","top","pointerEvents","display","alignItems","gap","borderRadius","fontSize","padding","border","_c","$RefreshReg$"],"sources":["D:/code/realtime-whiteboard/Frontend/src/Canvas.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport rough from \"roughjs/bundled/rough.esm\";\r\n\r\nconst generator = rough.generator();\r\n\r\nexport default function Canvas({\r\n  canvasRef, ctx, color, size, setElements, elements, tool\r\n}) {\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  const [cursor, setCursor] = useState({ x: 0, y: 0, visible: false });\r\n\r\n  // khởi tạo canvas + DPR theo kích thước container\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const parent = canvas.parentElement;\r\n    const cssW = parent.clientWidth;\r\n    const cssH = parent.clientHeight;\r\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\r\n\r\n    canvas.width  = Math.round(cssW * dpr);\r\n    canvas.height = Math.round(cssH * dpr);\r\n    canvas.style.width  = cssW + \"px\";\r\n    canvas.style.height = cssH + \"px\";\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n    context.setTransform(1, 0, 0, 1, 0, 0);\r\n    context.scale(dpr, dpr);\r\n    context.lineCap = \"round\";\r\n    context.strokeStyle = color;\r\n    context.lineWidth = size;\r\n    ctx.current = context;\r\n\r\n    const onResize = () => {\r\n      const cssW2 = parent.clientWidth;\r\n      const cssH2 = parent.clientHeight;\r\n      const dpr2 = Math.max(1, window.devicePixelRatio || 1);\r\n      canvas.width  = Math.round(cssW2 * dpr2);\r\n      canvas.height = Math.round(cssH2 * dpr2);\r\n      canvas.style.width  = cssW2 + \"px\";\r\n      canvas.style.height = cssH2 + \"px\";\r\n      context.setTransform(1, 0, 0, 1, 0, 0);\r\n      context.scale(dpr2, dpr2);\r\n      redraw();\r\n    };\r\n    window.addEventListener(\"resize\", onResize);\r\n    return () => window.removeEventListener(\"resize\", onResize);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // đổi màu khi đổi palette\r\n  useEffect(() => {\r\n    if (ctx.current) ctx.current.strokeStyle = color;\r\n  }, [color, ctx]);\r\n\r\n  /*** Input handlers ***/\r\n  const handleMouseDown = (e) => {\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n\r\n    if (tool === \"pen\") {\r\n      setElements(prev => [...prev, {\r\n        element: \"pencil\", offsetX, offsetY, path: [[offsetX, offsetY]],\r\n        stroke: color, size\r\n      }]);\r\n    } else if (tool === \"eraser\") {\r\n      setElements(prev => [...prev, {\r\n        element: \"eraser\", offsetX, offsetY, path: [[offsetX, offsetY]],\r\n        size: Math.max(8, size * 3) // tẩy to hơn nét\r\n      }]);\r\n    } else if (tool === \"rect\") {\r\n      setElements(prev => [...prev, {\r\n        element: \"rect\", offsetX, offsetY, width: 0, height: 0,\r\n        stroke: color, size\r\n      }]);\r\n    } else if (tool === \"line\") {\r\n      setElements(prev => [...prev, {\r\n        element: \"line\", offsetX, offsetY, width: offsetX, height: offsetY,\r\n        stroke: color, size\r\n      }]);\r\n    } else if (tool === \"circle\") {\r\n      setElements(prev => [...prev, {\r\n        element: \"circle\", cx: offsetX, cy: offsetY, r: 0,\r\n        stroke: color, size\r\n      }]);\r\n    }\r\n\r\n    setIsDrawing(true);\r\n    setCursor({ x: offsetX, y: offsetY, visible: true });\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n    setCursor({ x: offsetX, y: offsetY, visible: true });\r\n    if (!isDrawing) return;\r\n\r\n    if (tool === \"rect\") {\r\n      setElements(prev => prev.map((ele, i) =>\r\n        i === elements.length - 1\r\n          ? {\r\n              ...ele,\r\n              width: Math.abs(offsetX - ele.offsetX),\r\n              height: Math.abs(offsetY - ele.offsetY),\r\n              offsetX: offsetX < ele.offsetX ? offsetX : ele.offsetX,\r\n              offsetY: offsetY < ele.offsetY ? offsetY : ele.offsetY\r\n            }\r\n          : ele\r\n      ));\r\n    } else if (tool === \"line\") {\r\n      setElements(prev => prev.map((ele, i) =>\r\n        i === elements.length - 1 ? { ...ele, width: offsetX, height: offsetY } : ele\r\n      ));\r\n    } else if (tool === \"pen\" || tool === \"eraser\") {\r\n      setElements(prev => prev.map((ele, i) =>\r\n        i === elements.length - 1\r\n          ? { ...ele, path: [...ele.path, [offsetX, offsetY]] }\r\n          : ele\r\n      ));\r\n    } else if (tool === \"circle\") {\r\n      setElements(prev => prev.map((ele, i) =>\r\n        i === elements.length - 1\r\n          ? { ...ele, r: Math.hypot(offsetX - ele.cx, offsetY - ele.cy) }\r\n          : ele\r\n      ));\r\n    }\r\n  };\r\n\r\n  const handleMouseUp     = () => setIsDrawing(false);\r\n  const handleMouseLeave  = () => setCursor(c => ({ ...c, visible: false }));\r\n\r\n  /*** Vẽ lại toàn bộ ***/\r\n  const drawEraserPath = (path, eraserSize) => {\r\n    const c = ctx.current;\r\n    c.save();\r\n    c.globalCompositeOperation = \"destination-out\";\r\n    c.lineCap = \"round\";\r\n    c.lineWidth = eraserSize;\r\n    c.beginPath();\r\n    c.moveTo(path[0][0], path[0][1]);\r\n    for (let i = 1; i < path.length; i++) c.lineTo(path[i][0], path[i][1]);\r\n    c.stroke();\r\n    c.restore();\r\n  };\r\n\r\n  const redraw = () => {\r\n    const canvas = canvasRef.current;\r\n    const roughCanvas = rough.canvas(canvas);\r\n    ctx.current.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    elements.forEach((ele) => {\r\n      if (ele.element === \"rect\") {\r\n        roughCanvas.draw(\r\n          generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: ele.size || size,\r\n          })\r\n        );\r\n      } else if (ele.element === \"line\") {\r\n        roughCanvas.draw(\r\n          generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: ele.size || size,\r\n          })\r\n        );\r\n      } else if (ele.element === \"pencil\") {\r\n        roughCanvas.linearPath(ele.path, {\r\n          stroke: ele.stroke,\r\n          roughness: 0,\r\n          strokeWidth: ele.size || size,\r\n        });\r\n      } else if (ele.element === \"eraser\") {\r\n        drawEraserPath(ele.path, ele.size || Math.max(8, size * 3));\r\n      } else if (ele.element === \"circle\") {\r\n        const d = (ele.r || 0) * 2; \r\n        roughCanvas.draw(\r\n          generator.circle(ele.cx, ele.cy, d, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: ele.size || size,\r\n          })\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  useLayoutEffect(() => { if (ctx.current) redraw(); }, [elements]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"calc(100vh - 64px)\",\r\n        position: \"relative\",\r\n        background: \"#fff\",\r\n        overflow: \"hidden\",\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseLeave={handleMouseLeave}\r\n    >\r\n      <canvas ref={canvasRef} />\r\n      {/* nhãn con trỏ \"Bạn\" */}\r\n      {cursor.visible && (\r\n        <div style={{\r\n          position: \"absolute\",\r\n          left: cursor.x + 10,\r\n          top: cursor.y + 10,\r\n          pointerEvents: \"none\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          gap: 6\r\n        }}>\r\n          <span style={{ width:8, height:8, borderRadius:\"50%\", background:\"#0ea5e9\" }} />\r\n          <span style={{\r\n            background:\"#111827\", color:\"#e5e7eb\",\r\n            fontSize:12, padding:\"2px 6px\", borderRadius:6,\r\n            border:\"1px solid #334155\"\r\n          }}>Bạn</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AACnE,OAAOC,KAAK,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,SAAS,GAAGH,KAAK,CAACG,SAAS,CAAC,CAAC;AAEnC,eAAe,SAASC,MAAMA,CAAC;EAC7BC,SAAS;EAAEC,GAAG;EAAEC,KAAK;EAAEC,IAAI;EAAEC,WAAW;EAAEC,QAAQ;EAAEC;AACtD,CAAC,EAAE;EAAAC,EAAA;EACD,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACgB,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC;IAAEkB,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE,CAAC;IAAEC,OAAO,EAAE;EAAM,CAAC,CAAC;;EAEpE;EACAtB,SAAS,CAAC,MAAM;IACd,MAAMuB,MAAM,GAAGf,SAAS,CAACgB,OAAO;IAChC,MAAMC,MAAM,GAAGF,MAAM,CAACG,aAAa;IACnC,MAAMC,IAAI,GAAGF,MAAM,CAACG,WAAW;IAC/B,MAAMC,IAAI,GAAGJ,MAAM,CAACK,YAAY;IAChC,MAAMC,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,MAAM,CAACC,gBAAgB,IAAI,CAAC,CAAC;IAErDZ,MAAM,CAACa,KAAK,GAAIJ,IAAI,CAACK,KAAK,CAACV,IAAI,GAAGI,GAAG,CAAC;IACtCR,MAAM,CAACe,MAAM,GAAGN,IAAI,CAACK,KAAK,CAACR,IAAI,GAAGE,GAAG,CAAC;IACtCR,MAAM,CAACgB,KAAK,CAACH,KAAK,GAAIT,IAAI,GAAG,IAAI;IACjCJ,MAAM,CAACgB,KAAK,CAACD,MAAM,GAAGT,IAAI,GAAG,IAAI;IAEjC,MAAMW,OAAO,GAAGjB,MAAM,CAACkB,UAAU,CAAC,IAAI,CAAC;IACvCD,OAAO,CAACE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACtCF,OAAO,CAACG,KAAK,CAACZ,GAAG,EAAEA,GAAG,CAAC;IACvBS,OAAO,CAACI,OAAO,GAAG,OAAO;IACzBJ,OAAO,CAACK,WAAW,GAAGnC,KAAK;IAC3B8B,OAAO,CAACM,SAAS,GAAGnC,IAAI;IACxBF,GAAG,CAACe,OAAO,GAAGgB,OAAO;IAErB,MAAMO,QAAQ,GAAGA,CAAA,KAAM;MACrB,MAAMC,KAAK,GAAGvB,MAAM,CAACG,WAAW;MAChC,MAAMqB,KAAK,GAAGxB,MAAM,CAACK,YAAY;MACjC,MAAMoB,IAAI,GAAGlB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,MAAM,CAACC,gBAAgB,IAAI,CAAC,CAAC;MACtDZ,MAAM,CAACa,KAAK,GAAIJ,IAAI,CAACK,KAAK,CAACW,KAAK,GAAGE,IAAI,CAAC;MACxC3B,MAAM,CAACe,MAAM,GAAGN,IAAI,CAACK,KAAK,CAACY,KAAK,GAAGC,IAAI,CAAC;MACxC3B,MAAM,CAACgB,KAAK,CAACH,KAAK,GAAIY,KAAK,GAAG,IAAI;MAClCzB,MAAM,CAACgB,KAAK,CAACD,MAAM,GAAGW,KAAK,GAAG,IAAI;MAClCT,OAAO,CAACE,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MACtCF,OAAO,CAACG,KAAK,CAACO,IAAI,EAAEA,IAAI,CAAC;MACzBC,MAAM,CAAC,CAAC;IACV,CAAC;IACDjB,MAAM,CAACkB,gBAAgB,CAAC,QAAQ,EAAEL,QAAQ,CAAC;IAC3C,OAAO,MAAMb,MAAM,CAACmB,mBAAmB,CAAC,QAAQ,EAAEN,QAAQ,CAAC;IAC3D;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA/C,SAAS,CAAC,MAAM;IACd,IAAIS,GAAG,CAACe,OAAO,EAAEf,GAAG,CAACe,OAAO,CAACqB,WAAW,GAAGnC,KAAK;EAClD,CAAC,EAAE,CAACA,KAAK,EAAED,GAAG,CAAC,CAAC;;EAEhB;EACA,MAAM6C,eAAe,GAAIC,CAAC,IAAK;IAC7B,MAAM;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAGF,CAAC,CAACG,WAAW;IAE1C,IAAI5C,IAAI,KAAK,KAAK,EAAE;MAClBF,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BC,OAAO,EAAE,QAAQ;QAAEJ,OAAO;QAAEC,OAAO;QAAEI,IAAI,EAAE,CAAC,CAACL,OAAO,EAAEC,OAAO,CAAC,CAAC;QAC/DK,MAAM,EAAEpD,KAAK;QAAEC;MACjB,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIG,IAAI,KAAK,QAAQ,EAAE;MAC5BF,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BC,OAAO,EAAE,QAAQ;QAAEJ,OAAO;QAAEC,OAAO;QAAEI,IAAI,EAAE,CAAC,CAACL,OAAO,EAAEC,OAAO,CAAC,CAAC;QAC/D9C,IAAI,EAAEqB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEtB,IAAI,GAAG,CAAC,CAAC,CAAC;MAC9B,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIG,IAAI,KAAK,MAAM,EAAE;MAC1BF,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BC,OAAO,EAAE,MAAM;QAAEJ,OAAO;QAAEC,OAAO;QAAErB,KAAK,EAAE,CAAC;QAAEE,MAAM,EAAE,CAAC;QACtDwB,MAAM,EAAEpD,KAAK;QAAEC;MACjB,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIG,IAAI,KAAK,MAAM,EAAE;MAC1BF,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BC,OAAO,EAAE,MAAM;QAAEJ,OAAO;QAAEC,OAAO;QAAErB,KAAK,EAAEoB,OAAO;QAAElB,MAAM,EAAEmB,OAAO;QAClEK,MAAM,EAAEpD,KAAK;QAAEC;MACjB,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAIG,IAAI,KAAK,QAAQ,EAAE;MAC5BF,WAAW,CAAC+C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BC,OAAO,EAAE,QAAQ;QAAEG,EAAE,EAAEP,OAAO;QAAEQ,EAAE,EAAEP,OAAO;QAAEQ,CAAC,EAAE,CAAC;QACjDH,MAAM,EAAEpD,KAAK;QAAEC;MACjB,CAAC,CAAC,CAAC;IACL;IAEAM,YAAY,CAAC,IAAI,CAAC;IAClBE,SAAS,CAAC;MAAEC,CAAC,EAAEoC,OAAO;MAAEnC,CAAC,EAAEoC,OAAO;MAAEnC,OAAO,EAAE;IAAK,CAAC,CAAC;EACtD,CAAC;EAED,MAAM4C,eAAe,GAAIX,CAAC,IAAK;IAC7B,MAAM;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAGF,CAAC,CAACG,WAAW;IAC1CvC,SAAS,CAAC;MAAEC,CAAC,EAAEoC,OAAO;MAAEnC,CAAC,EAAEoC,OAAO;MAAEnC,OAAO,EAAE;IAAK,CAAC,CAAC;IACpD,IAAI,CAACN,SAAS,EAAE;IAEhB,IAAIF,IAAI,KAAK,MAAM,EAAE;MACnBF,WAAW,CAAC+C,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,KAClCA,CAAC,KAAKxD,QAAQ,CAACyD,MAAM,GAAG,CAAC,GACrB;QACE,GAAGF,GAAG;QACNhC,KAAK,EAAEJ,IAAI,CAACuC,GAAG,CAACf,OAAO,GAAGY,GAAG,CAACZ,OAAO,CAAC;QACtClB,MAAM,EAAEN,IAAI,CAACuC,GAAG,CAACd,OAAO,GAAGW,GAAG,CAACX,OAAO,CAAC;QACvCD,OAAO,EAAEA,OAAO,GAAGY,GAAG,CAACZ,OAAO,GAAGA,OAAO,GAAGY,GAAG,CAACZ,OAAO;QACtDC,OAAO,EAAEA,OAAO,GAAGW,GAAG,CAACX,OAAO,GAAGA,OAAO,GAAGW,GAAG,CAACX;MACjD,CAAC,GACDW,GACN,CAAC,CAAC;IACJ,CAAC,MAAM,IAAItD,IAAI,KAAK,MAAM,EAAE;MAC1BF,WAAW,CAAC+C,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,KAClCA,CAAC,KAAKxD,QAAQ,CAACyD,MAAM,GAAG,CAAC,GAAG;QAAE,GAAGF,GAAG;QAAEhC,KAAK,EAAEoB,OAAO;QAAElB,MAAM,EAAEmB;MAAQ,CAAC,GAAGW,GAC5E,CAAC,CAAC;IACJ,CAAC,MAAM,IAAItD,IAAI,KAAK,KAAK,IAAIA,IAAI,KAAK,QAAQ,EAAE;MAC9CF,WAAW,CAAC+C,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,KAClCA,CAAC,KAAKxD,QAAQ,CAACyD,MAAM,GAAG,CAAC,GACrB;QAAE,GAAGF,GAAG;QAAEP,IAAI,EAAE,CAAC,GAAGO,GAAG,CAACP,IAAI,EAAE,CAACL,OAAO,EAAEC,OAAO,CAAC;MAAE,CAAC,GACnDW,GACN,CAAC,CAAC;IACJ,CAAC,MAAM,IAAItD,IAAI,KAAK,QAAQ,EAAE;MAC5BF,WAAW,CAAC+C,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,KAClCA,CAAC,KAAKxD,QAAQ,CAACyD,MAAM,GAAG,CAAC,GACrB;QAAE,GAAGF,GAAG;QAAEH,CAAC,EAAEjC,IAAI,CAACwC,KAAK,CAAChB,OAAO,GAAGY,GAAG,CAACL,EAAE,EAAEN,OAAO,GAAGW,GAAG,CAACJ,EAAE;MAAE,CAAC,GAC7DI,GACN,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMK,aAAa,GAAOA,CAAA,KAAMxD,YAAY,CAAC,KAAK,CAAC;EACnD,MAAMyD,gBAAgB,GAAIA,CAAA,KAAMvD,SAAS,CAACwD,CAAC,KAAK;IAAE,GAAGA,CAAC;IAAErD,OAAO,EAAE;EAAM,CAAC,CAAC,CAAC;;EAE1E;EACA,MAAMsD,cAAc,GAAGA,CAACf,IAAI,EAAEgB,UAAU,KAAK;IAC3C,MAAMF,CAAC,GAAGlE,GAAG,CAACe,OAAO;IACrBmD,CAAC,CAACG,IAAI,CAAC,CAAC;IACRH,CAAC,CAACI,wBAAwB,GAAG,iBAAiB;IAC9CJ,CAAC,CAAC/B,OAAO,GAAG,OAAO;IACnB+B,CAAC,CAAC7B,SAAS,GAAG+B,UAAU;IACxBF,CAAC,CAACK,SAAS,CAAC,CAAC;IACbL,CAAC,CAACM,MAAM,CAACpB,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,IAAI,CAACS,MAAM,EAAED,CAAC,EAAE,EAAEM,CAAC,CAACO,MAAM,CAACrB,IAAI,CAACQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAER,IAAI,CAACQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtEM,CAAC,CAACb,MAAM,CAAC,CAAC;IACVa,CAAC,CAACQ,OAAO,CAAC,CAAC;EACb,CAAC;EAED,MAAMhC,MAAM,GAAGA,CAAA,KAAM;IACnB,MAAM5B,MAAM,GAAGf,SAAS,CAACgB,OAAO;IAChC,MAAM4D,WAAW,GAAGjF,KAAK,CAACoB,MAAM,CAACA,MAAM,CAAC;IACxCd,GAAG,CAACe,OAAO,CAAC6D,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE9D,MAAM,CAACa,KAAK,EAAEb,MAAM,CAACe,MAAM,CAAC;IAExDzB,QAAQ,CAACyE,OAAO,CAAElB,GAAG,IAAK;MACxB,IAAIA,GAAG,CAACR,OAAO,KAAK,MAAM,EAAE;QAC1BwB,WAAW,CAACG,IAAI,CACdjF,SAAS,CAACkF,SAAS,CAACpB,GAAG,CAACZ,OAAO,EAAEY,GAAG,CAACX,OAAO,EAAEW,GAAG,CAAChC,KAAK,EAAEgC,GAAG,CAAC9B,MAAM,EAAE;UACnEwB,MAAM,EAAEM,GAAG,CAACN,MAAM;UAClB2B,SAAS,EAAE,CAAC;UACZC,WAAW,EAAEtB,GAAG,CAACzD,IAAI,IAAIA;QAC3B,CAAC,CACH,CAAC;MACH,CAAC,MAAM,IAAIyD,GAAG,CAACR,OAAO,KAAK,MAAM,EAAE;QACjCwB,WAAW,CAACG,IAAI,CACdjF,SAAS,CAACqF,IAAI,CAACvB,GAAG,CAACZ,OAAO,EAAEY,GAAG,CAACX,OAAO,EAAEW,GAAG,CAAChC,KAAK,EAAEgC,GAAG,CAAC9B,MAAM,EAAE;UAC9DwB,MAAM,EAAEM,GAAG,CAACN,MAAM;UAClB2B,SAAS,EAAE,CAAC;UACZC,WAAW,EAAEtB,GAAG,CAACzD,IAAI,IAAIA;QAC3B,CAAC,CACH,CAAC;MACH,CAAC,MAAM,IAAIyD,GAAG,CAACR,OAAO,KAAK,QAAQ,EAAE;QACnCwB,WAAW,CAACQ,UAAU,CAACxB,GAAG,CAACP,IAAI,EAAE;UAC/BC,MAAM,EAAEM,GAAG,CAACN,MAAM;UAClB2B,SAAS,EAAE,CAAC;UACZC,WAAW,EAAEtB,GAAG,CAACzD,IAAI,IAAIA;QAC3B,CAAC,CAAC;MACJ,CAAC,MAAM,IAAIyD,GAAG,CAACR,OAAO,KAAK,QAAQ,EAAE;QACnCgB,cAAc,CAACR,GAAG,CAACP,IAAI,EAAEO,GAAG,CAACzD,IAAI,IAAIqB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEtB,IAAI,GAAG,CAAC,CAAC,CAAC;MAC7D,CAAC,MAAM,IAAIyD,GAAG,CAACR,OAAO,KAAK,QAAQ,EAAE;QACnC,MAAMiC,CAAC,GAAG,CAACzB,GAAG,CAACH,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1BmB,WAAW,CAACG,IAAI,CACdjF,SAAS,CAACwF,MAAM,CAAC1B,GAAG,CAACL,EAAE,EAAEK,GAAG,CAACJ,EAAE,EAAE6B,CAAC,EAAE;UAClC/B,MAAM,EAAEM,GAAG,CAACN,MAAM;UAClB2B,SAAS,EAAE,CAAC;UACZC,WAAW,EAAEtB,GAAG,CAACzD,IAAI,IAAIA;QAC3B,CAAC,CACH,CAAC;MACH;IACF,CAAC,CAAC;EACJ,CAAC;EAEDV,eAAe,CAAC,MAAM;IAAE,IAAIQ,GAAG,CAACe,OAAO,EAAE2B,MAAM,CAAC,CAAC;EAAE,CAAC,EAAE,CAACtC,QAAQ,CAAC,CAAC;EAEjE,oBACER,OAAA;IACEkC,KAAK,EAAE;MACLD,MAAM,EAAE,oBAAoB;MAC5ByD,QAAQ,EAAE,UAAU;MACpBC,UAAU,EAAE,MAAM;MAClBC,QAAQ,EAAE;IACZ,CAAE;IACFC,WAAW,EAAE5C,eAAgB;IAC7B6C,WAAW,EAAEjC,eAAgB;IAC7BkC,SAAS,EAAE3B,aAAc;IACzB4B,YAAY,EAAE3B,gBAAiB;IAAA4B,QAAA,gBAE/BjG,OAAA;MAAQkG,GAAG,EAAE/F;IAAU;MAAAgG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAEzBzF,MAAM,CAACI,OAAO,iBACbjB,OAAA;MAAKkC,KAAK,EAAE;QACVwD,QAAQ,EAAE,UAAU;QACpBa,IAAI,EAAE1F,MAAM,CAACE,CAAC,GAAG,EAAE;QACnByF,GAAG,EAAE3F,MAAM,CAACG,CAAC,GAAG,EAAE;QAClByF,aAAa,EAAE,MAAM;QACrBC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,GAAG,EAAE;MACP,CAAE;MAAAX,QAAA,gBACAjG,OAAA;QAAMkC,KAAK,EAAE;UAAEH,KAAK,EAAC,CAAC;UAAEE,MAAM,EAAC,CAAC;UAAE4E,YAAY,EAAC,KAAK;UAAElB,UAAU,EAAC;QAAU;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChFtG,OAAA;QAAMkC,KAAK,EAAE;UACXyD,UAAU,EAAC,SAAS;UAAEtF,KAAK,EAAC,SAAS;UACrCyG,QAAQ,EAAC,EAAE;UAAEC,OAAO,EAAC,SAAS;UAAEF,YAAY,EAAC,CAAC;UAC9CG,MAAM,EAAC;QACT,CAAE;QAAAf,QAAA,EAAC;MAAG;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC5F,EAAA,CAzNuBR,MAAM;AAAA+G,EAAA,GAAN/G,MAAM;AAAA,IAAA+G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}