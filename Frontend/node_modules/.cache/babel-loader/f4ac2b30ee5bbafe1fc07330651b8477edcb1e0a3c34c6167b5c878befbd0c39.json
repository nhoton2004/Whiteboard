{"ast":null,"code":"var _jsxFileName = \"D:\\\\code\\\\realtime-whiteboard\\\\front\\\\src\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst generator = rough.generator();\nconst ERASER_SIZE = 18; // cỡ tẩy (px) – bạn chỉnh tùy ý\n\nconst Canvas = ({\n  canvasRef,\n  ctx,\n  color,\n  setElements,\n  elements,\n  tool\n}) => {\n  _s();\n  const [isDrawing, setIsDrawing] = useState(false);\n\n  // init canvas + DPR\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const parent = canvas.parentElement;\n    const cssW = parent.clientWidth;\n    const cssH = parent.clientHeight;\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\n    canvas.width = Math.round(cssW * dpr);\n    canvas.height = Math.round(cssH * dpr);\n    canvas.style.width = cssW + \"px\";\n    canvas.style.height = cssH + \"px\";\n    const context = canvas.getContext(\"2d\");\n    context.setTransform(1, 0, 0, 1, 0, 0);\n    context.scale(dpr, dpr);\n    context.lineCap = \"round\";\n    context.strokeStyle = color;\n    context.lineWidth = 5;\n    ctx.current = context;\n    const onResize = () => {\n      const cssW2 = parent.clientWidth;\n      const cssH2 = parent.clientHeight;\n      const dpr2 = Math.max(1, window.devicePixelRatio || 1);\n      canvas.width = Math.round(cssW2 * dpr2);\n      canvas.height = Math.round(cssH2 * dpr2);\n      canvas.style.width = cssW2 + \"px\";\n      canvas.style.height = cssH2 + \"px\";\n      context.setTransform(1, 0, 0, 1, 0, 0);\n      context.scale(dpr2, dpr2);\n      redraw();\n    };\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n  }, []);\n  useEffect(() => {\n    if (ctx.current) ctx.current.strokeStyle = color;\n  }, [color, ctx]);\n  const handleMouseDown = e => {\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    if (tool === \"pencil\") {\n      setElements(prev => [...prev, {\n        offsetX,\n        offsetY,\n        path: [[offsetX, offsetY]],\n        stroke: color,\n        element: \"pencil\"\n      }]);\n    } else if (tool === \"eraser\") {\n      setElements(prev => [...prev, {\n        offsetX,\n        offsetY,\n        path: [[offsetX, offsetY]],\n        size: ERASER_SIZE,\n        element: \"eraser\"\n      }]);\n    } else {\n      // rect | line\n      setElements(prev => [...prev, {\n        offsetX,\n        offsetY,\n        stroke: color,\n        element: tool\n      }]);\n    }\n    setIsDrawing(true);\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing) return;\n    const {\n      offsetX,\n      offsetY\n    } = e.nativeEvent;\n    if (tool === \"rect\") {\n      setElements(prev => prev.map((ele, idx) => idx === elements.length - 1 ? {\n        ...ele,\n        width: Math.abs(offsetX - ele.offsetX),\n        height: Math.abs(offsetY - ele.offsetY),\n        offsetX: offsetX < ele.offsetX ? offsetX : ele.offsetX,\n        offsetY: offsetY < ele.offsetY ? offsetY : ele.offsetY\n      } : ele));\n    } else if (tool === \"line\") {\n      setElements(prev => prev.map((ele, idx) => idx === elements.length - 1 ? {\n        ...ele,\n        width: offsetX,\n        height: offsetY\n      } : ele));\n    } else if (tool === \"pencil\" || tool === \"eraser\") {\n      setElements(prev => prev.map((ele, idx) => idx === elements.length - 1 ? {\n        ...ele,\n        path: [...ele.path, [offsetX, offsetY]]\n      } : ele));\n    }\n  };\n  const handleMouseUp = () => setIsDrawing(false);\n  const drawEraserPath = (path, size) => {\n    const c = ctx.current;\n    c.save();\n    c.globalCompositeOperation = \"destination-out\";\n    c.strokeStyle = \"rgba(0,0,0,1)\"; // màu không quan trọng khi destination-out\n    c.lineWidth = size;\n    c.beginPath();\n    c.moveTo(path[0][0], path[0][1]);\n    for (let i = 1; i < path.length; i++) c.lineTo(path[i][0], path[i][1]);\n    c.stroke();\n    c.restore();\n  };\n\n  // redraw tất cả element theo thứ tự đã vẽ\n  const redraw = () => {\n    const canvas = canvasRef.current;\n    const roughCanvas = rough.canvas(canvas);\n    ctx.current.clearRect(0, 0, canvas.width, canvas.height);\n    elements.forEach(ele => {\n      if (ele.element === \"rect\") {\n        roughCanvas.draw(generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"line\") {\n        roughCanvas.draw(generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        }));\n      } else if (ele.element === \"pencil\") {\n        roughCanvas.linearPath(ele.path, {\n          stroke: ele.stroke,\n          roughness: 0,\n          strokeWidth: 5\n        });\n      } else if (ele.element === \"eraser\") {\n        drawEraserPath(ele.path, ele.size || ERASER_SIZE);\n      }\n    });\n  };\n  useLayoutEffect(() => {\n    if (!ctx.current) return;\n    redraw();\n  }, [elements]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\",\n    style: {\n      height: \"500px\"\n    },\n    onMouseDown: handleMouseDown,\n    onMouseMove: handleMouseMove,\n    onMouseUp: handleMouseUp,\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"msMTcjGTX00fhl9Ndli+Oox7VUQ=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","rough","jsxDEV","_jsxDEV","generator","ERASER_SIZE","Canvas","canvasRef","ctx","color","setElements","elements","tool","_s","isDrawing","setIsDrawing","canvas","current","parent","parentElement","cssW","clientWidth","cssH","clientHeight","dpr","Math","max","window","devicePixelRatio","width","round","height","style","context","getContext","setTransform","scale","lineCap","strokeStyle","lineWidth","onResize","cssW2","cssH2","dpr2","redraw","addEventListener","removeEventListener","handleMouseDown","e","offsetX","offsetY","nativeEvent","prev","path","stroke","element","size","handleMouseMove","map","ele","idx","length","abs","handleMouseUp","drawEraserPath","c","save","globalCompositeOperation","beginPath","moveTo","i","lineTo","restore","roughCanvas","clearRect","forEach","draw","rectangle","roughness","strokeWidth","line","linearPath","className","onMouseDown","onMouseMove","onMouseUp","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/code/realtime-whiteboard/front/src/Canvas.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport rough from \"roughjs/bundled/rough.esm\";\r\n\r\nconst generator = rough.generator();\r\nconst ERASER_SIZE = 18; // cỡ tẩy (px) – bạn chỉnh tùy ý\r\n\r\nconst Canvas = ({ canvasRef, ctx, color, setElements, elements, tool }) => {\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n\r\n  // init canvas + DPR\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const parent = canvas.parentElement;\r\n    const cssW = parent.clientWidth;\r\n    const cssH = parent.clientHeight;\r\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\r\n\r\n    canvas.width = Math.round(cssW * dpr);\r\n    canvas.height = Math.round(cssH * dpr);\r\n    canvas.style.width = cssW + \"px\";\r\n    canvas.style.height = cssH + \"px\";\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n    context.setTransform(1, 0, 0, 1, 0, 0);\r\n    context.scale(dpr, dpr);\r\n    context.lineCap = \"round\";\r\n    context.strokeStyle = color;\r\n    context.lineWidth = 5;\r\n    ctx.current = context;\r\n\r\n    const onResize = () => {\r\n      const cssW2 = parent.clientWidth;\r\n      const cssH2 = parent.clientHeight;\r\n      const dpr2 = Math.max(1, window.devicePixelRatio || 1);\r\n      canvas.width = Math.round(cssW2 * dpr2);\r\n      canvas.height = Math.round(cssH2 * dpr2);\r\n      canvas.style.width = cssW2 + \"px\";\r\n      canvas.style.height = cssH2 + \"px\";\r\n      context.setTransform(1, 0, 0, 1, 0, 0);\r\n      context.scale(dpr2, dpr2);\r\n      redraw();\r\n    };\r\n    window.addEventListener(\"resize\", onResize);\r\n    return () => window.removeEventListener(\"resize\", onResize);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (ctx.current) ctx.current.strokeStyle = color;\r\n  }, [color, ctx]);\r\n\r\n  const handleMouseDown = (e) => {\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n\r\n    if (tool === \"pencil\") {\r\n      setElements((prev) => [\r\n        ...prev,\r\n        { offsetX, offsetY, path: [[offsetX, offsetY]], stroke: color, element: \"pencil\" },\r\n      ]);\r\n    } else if (tool === \"eraser\") {\r\n      setElements((prev) => [\r\n        ...prev,\r\n        { offsetX, offsetY, path: [[offsetX, offsetY]], size: ERASER_SIZE, element: \"eraser\" },\r\n      ]);\r\n    } else {\r\n      // rect | line\r\n      setElements((prev) => [...prev, { offsetX, offsetY, stroke: color, element: tool }]);\r\n    }\r\n    setIsDrawing(true);\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDrawing) return;\r\n    const { offsetX, offsetY } = e.nativeEvent;\r\n\r\n    if (tool === \"rect\") {\r\n      setElements((prev) =>\r\n        prev.map((ele, idx) =>\r\n          idx === elements.length - 1\r\n            ? {\r\n                ...ele,\r\n                width: Math.abs(offsetX - ele.offsetX),\r\n                height: Math.abs(offsetY - ele.offsetY),\r\n                offsetX: offsetX < ele.offsetX ? offsetX : ele.offsetX,\r\n                offsetY: offsetY < ele.offsetY ? offsetY : ele.offsetY,\r\n              }\r\n            : ele\r\n        )\r\n      );\r\n    } else if (tool === \"line\") {\r\n      setElements((prev) =>\r\n        prev.map((ele, idx) =>\r\n          idx === elements.length - 1 ? { ...ele, width: offsetX, height: offsetY } : ele\r\n        )\r\n      );\r\n    } else if (tool === \"pencil\" || tool === \"eraser\") {\r\n      setElements((prev) =>\r\n        prev.map((ele, idx) =>\r\n          idx === elements.length - 1\r\n            ? { ...ele, path: [...ele.path, [offsetX, offsetY]] }\r\n            : ele\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => setIsDrawing(false);\r\n\r\n  const drawEraserPath = (path, size) => {\r\n    const c = ctx.current;\r\n    c.save();\r\n    c.globalCompositeOperation = \"destination-out\";\r\n    c.strokeStyle = \"rgba(0,0,0,1)\"; // màu không quan trọng khi destination-out\r\n    c.lineWidth = size;\r\n    c.beginPath();\r\n    c.moveTo(path[0][0], path[0][1]);\r\n    for (let i = 1; i < path.length; i++) c.lineTo(path[i][0], path[i][1]);\r\n    c.stroke();\r\n    c.restore();\r\n  };\r\n\r\n  // redraw tất cả element theo thứ tự đã vẽ\r\n  const redraw = () => {\r\n    const canvas = canvasRef.current;\r\n    const roughCanvas = rough.canvas(canvas);\r\n    ctx.current.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    elements.forEach((ele) => {\r\n      if (ele.element === \"rect\") {\r\n        roughCanvas.draw(\r\n          generator.rectangle(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: 5,\r\n          })\r\n        );\r\n      } else if (ele.element === \"line\") {\r\n        roughCanvas.draw(\r\n          generator.line(ele.offsetX, ele.offsetY, ele.width, ele.height, {\r\n            stroke: ele.stroke,\r\n            roughness: 0,\r\n            strokeWidth: 5,\r\n          })\r\n        );\r\n      } else if (ele.element === \"pencil\") {\r\n        roughCanvas.linearPath(ele.path, {\r\n          stroke: ele.stroke,\r\n          roughness: 0,\r\n          strokeWidth: 5,\r\n        });\r\n      } else if (ele.element === \"eraser\") {\r\n        drawEraserPath(ele.path, ele.size || ERASER_SIZE);\r\n      }\r\n    });\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    if (!ctx.current) return;\r\n    redraw();\r\n  }, [elements]);\r\n\r\n  return (\r\n    <div\r\n      className=\"col-md-8 overflow-hidden border border-dark px-0 mx-auto mt-3\"\r\n      style={{ height: \"500px\" }}\r\n      onMouseDown={handleMouseDown}\r\n      onMouseMove={handleMouseMove}\r\n      onMouseUp={handleMouseUp}\r\n    >\r\n      <canvas ref={canvasRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}